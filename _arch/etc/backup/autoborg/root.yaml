location:
  source_directories:
    - /
    - /boot

  repositories:
    - /home/karelian/backup/{hostname}/root_borg
    - karelian@vps:/home/karelian/backup/{hostname}/root_borg

  one_file_system: true

  patterns_from:
    - /etc/backup/autoborg/root_patterns

  exclude_caches: true

  exclude_if_present:
    - .nobackup

storage:
  encryption_passcommand: cat /root/.borg_pass
  compression: auto,zstd
  relocated_repo_access_is_ok: true

consistency:
  checks: ["disabled"]

retention:
  keep_daily: 7
  keep_weekly: 4
  keep_monthly: 6
  prefix: "{hostname}-"

hooks:
  after_everything:
    - "chown -R karelian: /home/karelian/backup/*/root_borg"
    - "chown -R karelian: /home/karelian/.config/borg"
